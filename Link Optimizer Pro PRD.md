1. 项目概述
MagnetLink Optimizer Pro 是一款面向C端用户的、具备图形化界面的智能磁力链接搜索与优化软件。本项目旨在解决用户在传统磁力搜索网站中面临的信息过载、广告繁多、优质资源筛选困难等痛点。软件通过集成自动化搜索、多线程加速、智能规则筛选及大语言模型（LLM）赋能的内容分析，为用户提供高度提纯、高质量的搜索结果，致力于打造一个优雅、高效、智能的磁力链接优化工具。

2. 项目目标
功能目标：
实现一个独立的桌面应用程序，提供优雅、简约、现代的图形用户界面（GUI）。
集成 clmclm.com 作为首个搜索引擎，并设计可扩展的接口以备未来接入更多搜索源。
通过多线程技术加速搜索过程，提升用户响应速度。
实现一个双轨并行的智能筛选引擎，并允许用户创建自定义筛选规则。
无缝集成大语言模型（LLM）API，用于识别广告、丰富结果标签。
提供搜索历史、收藏夹及内容预览等增强功能。
性能目标：
在正常网络环境下，单次搜索（包含筛选）的总耗时应控制在10秒以内。
软件应保持低内存和CPU占用，运行流畅不卡顿。
用户体验目标：
提供“一键式”的便捷操作，用户只需输入关键词即可获得高质量结果。
界面设计遵循优雅、简约、现代的艺术风格，交互直观清晰。
提供明确的状态反馈，并允许用户通过预览、历史记录等功能高效管理信息。
3. 目标用户画像
核心用户： 追求高清影视资源的爱好者，对文件大小和版本有一定要求。
潜在用户： 希望快速找到无广告、高质量软件、游戏、文档等资源的普通互联网用户。
共同痛点： 厌倦了在网页端磁力站中手动翻页、辨别广告和筛选资源的繁琐过程。
4. 功能性需求 (Functional Requirements)
4.1 图形用户界面 (GUI)
主窗口：

设计风格： 采用现代设计语言，如圆角、柔和阴影、清晰的字体和图标，应提供深色/浅色模式切换。
核心组件：
输入框： 供用户输入搜索关键词，点击后可显示搜索历史。
搜索按钮： 触发搜索操作。
规则选择器： 搜索按钮旁边的下拉菜单，允许用户选择“默认智能规则”或已保存的“自定义规则”。
状态显示区： 实时显示软件状态（如“正在搜索前5页...”、“LLM分析中...”），并在完成后展示“筛选前共发现 N 个结果，最大文件为 X.X GB”。
视图切换按钮： 用于在“搜索结果”视图和“历史/收藏夹”视图之间切换。
结果展示区： 以卡片列表形式展示最终结果。
结果卡片 (Result Card)：

每个卡片清晰地展示一个搜索结果的所有信息。
包含元素：
资源名称 (Title): 加粗显示。
智能标签区 (Tags Area): 名称下方，展示LLM生成的标签，如 [纯净版], [4K], [含字幕]。
文件列表 (File List): 可展开/收起的区域，列出磁力链接包含的所有文件名。
文件大小 (Size): 醒目标注。
磁力链接 (Magnet Link): 显示链接文本。
一键复制按钮： 点击后将链接复制到剪贴板。
内容预览按钮 (Preview Button): 点击后触发文件内容预览。
收藏按钮 (Favorite Button): 星形图标，点击可将该结果添加至收藏夹。
4.2 搜索引擎模块
接口化设计： 定义一个标准的 SearchProvider 接口，包含 search(keyword, page) 方法，以支持未来扩展。clmclm.com 为首个实现。
搜索规则： 遵循 search-{关键词}-{分类}-{排序}-{页码}.html 格式，分类和排序参数根据用户在UI的选择动态构建。
多线程加速： 并发地对前 N 页（N可配置，默认为5）发起搜索请求，汇总所有结果后再进行处理。
4.3 智能筛选引擎
此引擎在获取到所有原始搜索结果后启动，并行执行以下两条筛选规则，最终产出1-2个结果。

规则一：特定标记筛选 (***REMOVED***.com@ Rule)

在所有结果中，查找资源名称包含 “***REMOVED***.com@” 的结果，若有多个，则选择“热度”最高的。
规则二：LLM 赋能的最大文件筛选 (LLM-Powered Max File Rule)

基准定位： 找到文件大小绝对最大的结果 BaseMaxItem。
广告评估： 调用LLM API评估 BaseMaxItem 的广告污染程度。
决策逻辑： 若 BaseMaxItem 广告评分低，则直接采纳。若评分高，则在不小于其大小85%的候选中，选择LLM评分最低（最纯净）的一个。
4.4 LLM 赋能的结果富化 (Result Enrichment)
目标： 利用LLM深度分析搜索结果，为用户提供超越基础文件信息的决策依据。
实现逻辑： 对通过初筛的优质结果进行二次处理，调用LLM API，使用分析性Prompt提取结构化信息（如内容类型、推测画质、是否含字幕、描述性标签等），并将其动态显示在结果卡片的智能标签区。
4.5 用户个性化功能
4.5.1 自定义筛选规则

目标： 赋予高级用户定义自己筛选逻辑的能力。
GUI: 提供一个“规则管理”窗口。
功能： 用户可创建、保存、启用多套规则，规则条件包括：文件大小范围、必须包含/不能包含的关键词、文件数量等。
4.5.2 搜索历史与收藏夹

目标： 提升用户操作效率和粘性。
搜索历史： 自动在本地数据库记录最近的搜索关键词，并在输入框提供快速选择。
收藏夹： 用户可将任意结果存入收藏夹，以便随时查看、搜索和管理。
4.6 文件内容预览
目标： 在下载前，提供对资源内容的直观了解。
实现逻辑：
压缩包: 解析并以树状视图展示其内部文件结构。
视频文件: 解析文件名，调用公共元数据API（如TMDb）获取并展示海报、简介、评分等信息。
5. 非功能性需求 (Non-Functional Requirements)
性能 (Performance): 核心搜索和筛选逻辑必须高效，避免UI线程阻塞。
可扩展性 (Scalability): 搜索引擎模块必须易于扩展，支持未来添加新的搜索源。
健壮性 (Robustness): 妥善处理网络错误、API请求失败、网站HTML结构变更等异常，并提供友好提示。
安全性 (Security): 用户输入的API Key等敏感信息，必须在本地进行安全存储。
6. 技术栈与架构建议
开发语言： Python
GUI框架： PyQt6 或 PySide6
网络请求： Requests
HTML解析： BeautifulSoup4
多线程： concurrent.futures.ThreadPoolExecutor
LLM集成： 对应官方的SDK (如 openai 库)
本地数据存储: SQLite (用于存储历史记录、收藏夹和自定义规则)
打包： PyInstaller 或 Nuitka (打包成独立的可执行文件)